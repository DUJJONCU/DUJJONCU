<!DOCTYPE html>
<html>
<head>
    <title>두쫀쿠 서바이버 - 이동 확인용</title>
    <style>
        body { margin: 0; overflow: hidden; background: #1a1a1a; font-family: sans-serif; }
        canvas { display: block; }
        #ui { position: absolute; top: 20px; left: 20px; color: white; pointer-events: none; }
        #guide { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); color: #aaa; }
    </style>
</head>
<body>
    <div id="ui">
        <div style="font-size: 20px;">위치: X: <span id="posX">0</span>, Y: <span id="posY">0</span></div>
        <div style="color: yellow;">W, A, S, D 키로 움직여보세요!</div>
    </div>
    <div id="guide">화면을 한 번 클릭해야 조작이 시작됩니다.</div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const player = { x: 0, y: 0, size: 25, speed: 5 };
        const keys = {};

        // 키보드 입력 감지
        window.addEventListener('keydown', e => { keys[e.key.toLowerCase()] = true; });
        window.addEventListener('keyup', e => { keys[e.key.toLowerCase()] = false; });

        function update() {
            let dx = 0;
            let dy = 0;

            if (keys['w'] || keys['arrowup']) dy -= 1;
            if (keys['s'] || keys['arrowdown']) dy += 1;
            if (keys['a'] || keys['arrowleft']) dx -= 1;
            if (keys['d'] || keys['arrowright']) dx += 1;

            // 대각선 이동 속도 보정
            if (dx !== 0 && dy !== 0) {
                const len = Math.sqrt(dx * dx + dy * dy);
                dx /= len; dy /= len;
            }

            player.x += dx * player.speed;
            player.y += dy * player.speed;

            // UI에 좌표 표시
            document.getElementById('posX').innerText = Math.floor(player.x);
            document.getElementById('posY').innerText = Math.floor(player.y);
        }

        function draw() {
            // 배경 청소
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // --- 격자 배경 그리기 (이동을 시각적으로 확인하는 핵심!) ---
            const gridSize = 100;
            const offsetX = -player.x % gridSize;
            const offsetY = -player.y % gridSize;

            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;

            // 세로선
            for (let x = offsetX; x < canvas.width; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            // 가로선
            for (let y = offsetY; y < canvas.height; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            // --- 플레이어 그리기 (화면 정중앙 고정) ---
            ctx.fillStyle = '#00ffcc'; // 두쫀쿠 색상
            ctx.shadowBlur = 15;
            ctx.shadowColor = '#00ffcc';
            ctx.beginPath();
            ctx.arc(canvas.width / 2, canvas.height / 2, player.size, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;
        }

        function loop() {
            update();
            draw();
            requestAnimationFrame(loop);
        }

        loop();
    </script>
</body>
</html>
