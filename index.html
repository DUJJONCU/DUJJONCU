<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ë‘ì«€ì¿  RPG</title>
    <style>
        body { margin: 0; background: #222; color: white; font-family: 'Courier New', Courier, monospace; overflow: hidden; }
        #game-world { width: 100vw; height: 70vh; background: #4a7d4a; position: relative; overflow: hidden; border-bottom: 4px solid #333; }
        #player { width: 40px; height: 40px; background: #f0ad4e; position: absolute; top: 50%; left: 50%; transition: 0.2s; border-radius: 5px; font-size: 30px; display: flex; align-items: center; justify-content: center; }
        #ui-panel { height: 30vh; padding: 15px; background: #333; }
        .stats { font-size: 14px; margin-bottom: 10px; color: #ffeb3b; }
        .log { font-size: 12px; height: 60px; overflow-y: auto; background: #000; padding: 5px; border: 1px solid #555; }
        .controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-top: 10px; width: 150px; }
        button { padding: 10px; background: #555; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:active { background: #888; }
    </style>
</head>
<body>

<div id="game-world">
    <div id="player">ğŸª</div>
</div>

<div id="ui-panel">
    <div class="stats" id="stat-text">LV: 1 | HP: 100 | EXP: 0</div>
    <div class="log" id="game-log">ëª¨í—˜ì„ ì‹œì‘í•©ë‹ˆë‹¤! ë°©í–¥í‚¤ë¥¼ ëˆŒëŸ¬ ì´ë™í•˜ì„¸ìš”.</div>
    
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div class="controls">
            <div></div><button onclick="move('up')">â–²</button><div></div>
            <button onclick="move('left')">â—€</button><button onclick="move('down')">â–¼</button><button onclick="move('right')">â–¶</button>
        </div>
        <button id="action-btn" style="background: #d9534f; width: 80px; height: 80px; border-radius: 50%; display: none;" onclick="battle()">ê³µê²©!</button>
    </div>
</div>

<script>
    let pPos = { x: 50, y: 50 };
    let stats = { lv: 1, hp: 100, exp: 0, atk: 10 };
    let isInBattle = false;

    function log(msg) {
        const logDiv = document.getElementById('game-log');
        logDiv.innerHTML += `<div>> ${msg}</div>`;
        logDiv.scrollTop = logDiv.scrollHeight;
    }

    function move(dir) {
        if (isInBattle) return;

        if (dir === 'up') pPos.y -= 10;
        if (dir === 'down') pPos.y += 10;
        if (dir === 'left') pPos.x -= 10;
        if (dir === 'right') pPos.x += 10;

        // ê²½ê³„ ì œí•œ
        pPos.x = Math.max(5, Math.min(85, pPos.x));
        pPos.y = Math.max(5, Math.min(85, pPos.y));

        const player = document.getElementById('player');
        player.style.left = pPos.x + '%';
        player.style.top = pPos.y + '%';

        // 20% í™•ë¥ ë¡œ ëª¬ìŠ¤í„° ì¡°ìš°
        if (Math.random() < 0.2) {
            startEncounter();
        }
    }

    function startEncounter() {
        isInBattle = true;
        document.getElementById('action-btn').style.display = 'block';
        log("<span style='color: #ff5252;'>ì•—! íƒ„ ì¿ í‚¤ ëª¬ìŠ¤í„°ë¥¼ ë§Œë‚¬ë‹¤!</span>");
    }

    function battle() {
        let damage = stats.atk + Math.floor(Math.random() * 5);
        log(`ëª¬ìŠ¤í„°ì—ê²Œ ${damage}ì˜ ë°ë¯¸ì§€!`);
        
        // ê°„ë‹¨í•œ ìŠ¹ë¦¬ ë¡œì§
        if (Math.random() > 0.5) {
            log("<span style='color: #4caf50;'>ìŠ¹ë¦¬! ê²½í—˜ì¹˜ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤.</span>");
            stats.exp += 20;
            if (stats.exp >= 100) {
                stats.lv++;
                stats.exp = 0;
                log("<b>ë ˆë²¨ ì—…!!</b>");
            }
            endBattle();
        } else {
            log("ëª¬ìŠ¤í„°ì˜ ê³µê²©! HPê°€ 5 ê°ì†Œí–ˆìŠµë‹ˆë‹¤.");
            stats.hp -= 5;
        }
        updateStats();
    }

    function endBattle() {
        isInBattle = false;
        document.getElementById('action-btn').style.display = 'none';
        updateStats();
    }

    function updateStats() {
        document.getElementById('stat-text').innerText = `LV: ${stats.lv} | HP: ${stats.hp} | EXP: ${stats.exp}`;
    }
</script>

</body>
</html>
