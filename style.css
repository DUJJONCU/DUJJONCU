/* 1. 무료 도트 폰트 갈무리9 불러오기 */
@import url('https://cdn.jsdelivr.net/npm/galmuri@latest/dist/galmuri.css');

/* 기본 레이아웃 및 폰트 */
body { 
    margin: 0; 
    font-family: 'Galmuri9', sans-serif; 
    background: #0a0a0a; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 100vh; 
    overflow: hidden; 
}

/* --- [로그인 화면] --- */
.overlay { 
    position: fixed; 
    inset: 0; 
    background: radial-gradient(circle at center, #1a1a2e 0%, #050505 100%); 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    z-index: 2000; 
}

.login-box { 
    background: rgba(20, 20, 30, 0.95); 
    padding: 40px 30px; 
    border-radius: 24px; 
    text-align: center; 
    width: 300px; 
    border: 2px solid #9945FF; 
    box-shadow: 0 0 30px rgba(153, 69, 255, 0.4); 
    color: white;
}

.login-box input { 
    width: 85%; 
    padding: 14px; 
    margin: 10px 0; 
    background: #0f0f1b;
    border: 1px solid #333; 
    border-radius: 12px; 
    color: #14F195;
    font-family: 'Galmuri9';
}

.login-box button { 
    width: 95%; 
    padding: 16px; 
    background: linear-gradient(135deg, #9945FF 0%, #14F195 100%); 
    color: white; 
    border: none; 
    border-radius: 12px; 
    cursor: pointer; 
    font-family: 'Galmuri9';
    box-shadow: 0 6px 0 #6a2eb3;
    transition: all 0.1s;
    position: relative;
}

.login-box button:active { top: 4px; box-shadow: 0 2px 0 #6a2eb3; }

/* --- [게임 메인 UI] --- */
#screen { 
    position: relative; 
    width: 360px; 
    height: 640px; 
    background: #1a1a2e !important; 
    border-radius: 30px; 
    display: flex; 
    flex-direction: column; 
    overflow: hidden; 
    border: 4px solid #333;
    margin: 0 auto;
}

#top-ui { 
    display: flex; 
    justify-content: space-between; 
    padding: 18px 25px; 
    background: rgba(248, 249, 250, 0.1); 
    border-bottom: 2px solid rgba(255,255,255,0.1); 
    color: white;
    font-size: 13px; 
    z-index: 10;
}

/* 캐릭터 영역 및 전광판 */
#character-area {
    position: relative;
    height: 380px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    padding-bottom: 30px;
}

#rank-ticker {
    position: absolute;
    top: 20px;
    width: 90%;
    height: 30px;
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid #14F195;
    border-radius: 8px;
    overflow: hidden;
    display: flex;
    align-items: center;
    z-index: 20;
}

.ticker-text {
    display: inline-block;
    white-space: nowrap;
    color: #14F195;
    font-size: 12px;
    padding-left: 100%;
    animation: ticker-scroll 40s linear infinite;
}

@keyframes ticker-scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-200%); }
}

/* [수정] 캐릭터 이미지: 흰색 배경 제거 최적화 */
#character-img { 
    width: 180px; 
    cursor: pointer; 
    transition: transform 0.1s, filter 0.5s, opacity 0.5s; 
    z-index: 5;
    
    /* 1. 흰색 배경을 투명하게 만드는 가장 강력한 설정 */
    mix-blend-mode: lighten; 
    
    /* 2. 이미지 자체를 선명하게 유지 */
    filter: none;
    background-color: transparent !important;
}

/* [수정] 잠자기 상태: 캐릭터가 검게 타지 않도록 조정 */
.sleeping { 
    /* brightness를 너무 낮추면 이미지 자체가 사라지므로 적절히 조절 */
    filter: grayscale(0.6) brightness(0.8) !important; 
    opacity: 0.6; /* 차라리 투명도를 조절하는 것이 배경색과 잘 섞입니다 */
}

/* [수정] 아담해진 말풍선 디자인 */
#speech-bubble {
    position: absolute;
    top: 60px; 
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid #9945FF;
    padding: 6px 12px; 
    border-radius: 15px;
    font-size: 11px; 
    font-weight: bold;
    color: #333;
    white-space: nowrap;
    max-width: 150px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(153, 69, 255, 0.2);
    z-index: 100;
    display: none;
}

/* 말풍선 꼬리 복구 */
#speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 8px 6px 0;
    border-style: solid;
    border-color: #9945FF transparent transparent;
}

/* 게이지 바 */
#bottom-ui { padding: 0 25px; }
.gauge-container { height: 18px; background: #222; border-radius: 10px; margin-bottom: 25px; position: relative; border: 2px solid #444; }
.gauge-fill { height: 100%; border-radius: 8px; transition: width 0.3s ease; }
.gauge-label { position: absolute; width: 100%; top: -20px; right: 0; text-align: right; font-size: 11px; color: #aaa; }

#exp-bar { background: linear-gradient(90deg, #9945FF, #3498db); }
#hungry-bar { background: linear-gradient(90deg, #14F195, #2ecc71); }

/* 하단 버튼 */
.button-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 15px; }
.action-btn { 
    padding: 12px 5px; border: none; border-radius: 12px; color: white; cursor: pointer; 
    font-family: 'Galmuri9'; font-size: 12px; position: relative; transition: 0.1s;
}

.action-btn.feed { background: #2ecc71; box-shadow: 0 5px 0 #27ae60; }
.action-btn.sleep { background: #34495e; box-shadow: 0 5px 0 #2c3e50; }
.action-btn.bag { background: #9b59b6; box-shadow: 0 5px 0 #8e44ad; }

.action-btn:active { top: 5px; box-shadow: none; filter: brightness(1.2); }

/* 모달 */
.modal {
    display: none;
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    z-index: 1000;
    align-items: center;
    justify-content: center;
}
.modal.active { display: flex; }
.modal-content {
    background: #1a1a2e;
    color: white;
    width: 80%;
    padding: 20px;
    border-radius: 20px;
    border: 2px solid #9945FF;
    text-align: center;
}

/* 기타 효과 */
.zzz-particle {
    position: absolute; color: #fff; font-size: 24px; pointer-events: none;
    animation: zzz-fly 2s linear forwards; z-index: 100;
}
@keyframes zzz-fly {
    0% { transform: translate(0, 0) scale(0.5); opacity: 0; }
    100% { transform: translate(30px, -100px) scale(1.2); opacity: 0; }
}
/* [수정] 캐릭터 이미지: 흰색 배경 제거 및 선명도 강화 */
#character-img { 
    width: 180px; 
    cursor: pointer; 
    transition: transform 0.1s, filter 0.5s; 
    z-index: 5;
    
    /* multiply 대신 밝은 부분을 날려버리는 필터 조합 사용 */
    filter: screen; /* 검은 배경에서 흰색 배경을 숨기는 시도 */
    /* 만약 위 필터가 안 먹히면 아래 주석을 해제하고 multiply를 지우세요 */
    /* mix-blend-mode: lighten; */ 
    
    background-color: transparent !important;
}

/* 잠자기 상태일 때만 희미하게 (평소에는 선명하게) */
.sleeping { 
    filter: grayscale(0.8) brightness(0.5) !important; 
    opacity: 0.7;
}

/* [추가] 레벨 표시 줄이 너무 붙지 않게 여백 조정 */
#level-display {
    color: white;
    font-weight: bold;
}